{"remainingRequest":"/home/makabaka/vuepress-theme-blog-material/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/makabaka/vuepress-theme-blog-material/node_modules/vuepress-theme-blog-material/layouts/Timeline.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/makabaka/vuepress-theme-blog-material/node_modules/vuepress-theme-blog-material/layouts/Timeline.vue","mtime":1637220084001},{"path":"/home/makabaka/vuepress-theme-blog-material/node_modules/cache-loader/dist/cjs.js","mtime":1637220083609},{"path":"/home/makabaka/vuepress-theme-blog-material/node_modules/vue-loader/lib/index.js","mtime":1637220083749}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0UG9zdERhdGVPckxhc3RVcGRhdGVkfSBmcm9tICIuLi91dGlscy9wb3N0cyI7CmltcG9ydCB7Y29sb3JzfSBmcm9tICIuLi91dGlscy9jb25zdGFudHMiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwb3N0czogW10sCiAgICAgIHRpbWVsaW5lTm9kZXM6IFtdLAogICAgICBjb2xvcnMsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMudGltZWxpbmVOb2RlcyA9IFtdOwogICAgY29uc3QgZGF0ZUZvcm1hdCA9IHRoaXMuJHRoZW1lQ29uZmlnLmRhdGVGb3JtYXQ7CiAgICAvLyBjYWxjdWxhdGUgcG9zdFRpbWUgYW5kIHNvcnQgYnkgcG9zdFRpbWUuCiAgICB0aGlzLnBvc3RzID0gdGhpcy4kc2l0ZS5wYWdlcwogICAgICAuZmlsdGVyKHBhZ2UgPT4gcGFnZS5pZCA9PT0gJ3Bvc3QnKQogICAgICAubWFwKHBvc3QgPT4gewogICAgICAgIHBvc3QucG9zdERhdGUgPSBnZXRQb3N0RGF0ZU9yTGFzdFVwZGF0ZWQocG9zdCwgZGF0ZUZvcm1hdCk7CiAgICAgICAgcmV0dXJuIHBvc3Q7CiAgICAgIH0pCiAgICAgIC5zb3J0KChwb3N0MSwgcG9zdDIpID0+IChwb3N0MS5wb3N0RGF0ZSA8IHBvc3QyLnBvc3REYXRlID8gMSA6IC0xKSk7CgogICAgLyoKICAgICAqIENvcHkgcG9zdHMgdG8gdGltZWxpbmUgbm9kZQogICAgICogYW5kIGluc2VydCBhIGRhdGUgbm9kZSB3aGVuIHRoZSBjdXJyZW50IHBvc3QgYW5kIHRoZSBwcmV2aW91cyBwb3N0IGFyZSBwb3N0ZWQgaW4gZGlmZmVyZW50IG1vbnRoCiAgICAgKi8KICAgIGxldCBsYXN0RGF0ZUluZGV4ID0gLTE7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucG9zdHMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGkgPT09IDAgfHwgdGhpcy5wb3N0c1tpXS5wb3N0RGF0ZS5zbGljZSgwLCA3KSAhPT0gdGhpcy5wb3N0c1tpIC0gMV0ucG9zdERhdGUuc2xpY2UoMCwgNykpIHsKICAgICAgICBpZiAobGFzdERhdGVJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIHRoaXMudGltZWxpbmVOb2Rlc1tsYXN0RGF0ZUluZGV4XS5wb3N0c0NvdW50ID0gdGhpcy50aW1lbGluZU5vZGVzLmxlbmd0aCAtIGxhc3REYXRlSW5kZXggLSAxOwogICAgICAgIH0KICAgICAgICBsYXN0RGF0ZUluZGV4ID0gdGhpcy50aW1lbGluZU5vZGVzLmxlbmd0aDsKICAgICAgICB0aGlzLnRpbWVsaW5lTm9kZXMucHVzaCh7CiAgICAgICAgICBpc0RhdGU6IHRydWUsCiAgICAgICAgICBkYXRlOiB0aGlzLnBvc3RzW2ldLnBvc3REYXRlLnNsaWNlKDAsIDcpCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy50aW1lbGluZU5vZGVzLnB1c2goewogICAgICAgIC4uLnRoaXMucG9zdHNbaV0sCiAgICAgICAgaXNEYXRlOiBmYWxzZQogICAgICB9KTsKICAgIH0KICAgIGlmIChsYXN0RGF0ZUluZGV4ICE9PSAtMSkgewogICAgICB0aGlzLnRpbWVsaW5lTm9kZXNbbGFzdERhdGVJbmRleF0ucG9zdHNDb3VudCA9IHRoaXMudGltZWxpbmVOb2Rlcy5sZW5ndGggLSBsYXN0RGF0ZUluZGV4IC0gMTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Timeline.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Timeline.vue","sourceRoot":"node_modules/vuepress-theme-blog-material/layouts","sourcesContent":["<template>\n  <v-container>\n    <v-row class=\"justify-center\">\n      <v-col\n        cols=\"12\"\n        sm=\"8\"\n      >\n        <v-timeline\n          align-top\n          dense\n        >\n          <v-timeline-item\n            key=\"total\"\n            icon=\"mdi-text\"\n            fill-dot\n            :color=\"colors[0]\"\n          >\n            <div class=\"py-2\">\n              共 {{ posts.length }} 篇\n            </div>\n          </v-timeline-item>\n          <template v-for=\"(node, index) in timelineNodes\">\n            <v-timeline-item\n              v-if=\"node.isDate\"\n              :key=\"node.date\"\n              icon=\"mdi-calendar\"\n              fill-dot\n              :color=\"colors[(index+1) % colors.length]\"\n            >\n              <div class=\"py-2\">\n                <strong>{{ node.date }}</strong> （{{ node.postsCount }} 篇）\n              </div>\n            </v-timeline-item>\n\n            <v-timeline-item\n              v-else\n              :key=\"node.key\"\n              :color=\"colors[(index+1) % colors.length]\"\n              small\n            >\n              <v-row>\n                <v-col\n                  cols=\"3\"\n                  sm=\"2\"\n                >\n                  {{ node.postDate.slice(5) }}\n                </v-col>\n                <v-col>\n                  <router-link\n                    :to=\"node.path\"\n                    class=\"no-decoration\"\n                  >\n                    <strong>{{ node.title }}</strong>\n                  </router-link>\n                </v-col>\n              </v-row>\n            </v-timeline-item>\n          </template>\n        </v-timeline>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport {getPostDateOrLastUpdated} from \"../utils/posts\";\nimport {colors} from \"../utils/constants\";\n\nexport default {\n  data() {\n    return {\n      posts: [],\n      timelineNodes: [],\n      colors,\n    };\n  },\n  created() {\n    this.timelineNodes = [];\n    const dateFormat = this.$themeConfig.dateFormat;\n    // calculate postTime and sort by postTime.\n    this.posts = this.$site.pages\n      .filter(page => page.id === 'post')\n      .map(post => {\n        post.postDate = getPostDateOrLastUpdated(post, dateFormat);\n        return post;\n      })\n      .sort((post1, post2) => (post1.postDate < post2.postDate ? 1 : -1));\n\n    /*\n     * Copy posts to timeline node\n     * and insert a date node when the current post and the previous post are posted in different month\n     */\n    let lastDateIndex = -1;\n    for (let i = 0; i < this.posts.length; i++) {\n      if (i === 0 || this.posts[i].postDate.slice(0, 7) !== this.posts[i - 1].postDate.slice(0, 7)) {\n        if (lastDateIndex !== -1) {\n          this.timelineNodes[lastDateIndex].postsCount = this.timelineNodes.length - lastDateIndex - 1;\n        }\n        lastDateIndex = this.timelineNodes.length;\n        this.timelineNodes.push({\n          isDate: true,\n          date: this.posts[i].postDate.slice(0, 7)\n        });\n      }\n      this.timelineNodes.push({\n        ...this.posts[i],\n        isDate: false\n      });\n    }\n    if (lastDateIndex !== -1) {\n      this.timelineNodes[lastDateIndex].postsCount = this.timelineNodes.length - lastDateIndex - 1;\n    }\n  }\n}\n</script>"]}]}