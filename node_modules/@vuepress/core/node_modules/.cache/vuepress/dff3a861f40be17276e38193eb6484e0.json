{"remainingRequest":"/home/makabaka/vuepress-theme-blog-material/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/makabaka/vuepress-theme-blog-material/node_modules/vuepress-theme-blog-material/components/Header/SettingsDrawer/Settings/ThemeSettings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/makabaka/vuepress-theme-blog-material/node_modules/vuepress-theme-blog-material/components/Header/SettingsDrawer/Settings/ThemeSettings.vue","mtime":1637220083997},{"path":"/home/makabaka/vuepress-theme-blog-material/node_modules/cache-loader/dist/cjs.js","mtime":1637220083609},{"path":"/home/makabaka/vuepress-theme-blog-material/node_modules/vue-loader/lib/index.js","mtime":1637220083749}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8vIEV4dGVuc2lvbnMKaW1wb3J0IFNldHRpbmdzR3JvdXAgZnJvbSAnLi4vVGVtcGxhdGUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1RoZW1lU2V0dGluZ3MnLAoKICBleHRlbmRzOiBTZXR0aW5nc0dyb3VwLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICfkuLvpopgnLAogICAgICBpdGVtczogWwogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnbGlnaHQnLAogICAgICAgICAgdGV4dDogJ+a1heiJsuS4u+mimCcsCiAgICAgICAgICBpY29uOiAnbWRpLXdoaXRlLWJhbGFuY2Utc3VubnknLAogICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuc2V0VGhlbWUoZmFsc2UsIGZhbHNlKSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnZGFyaycsCiAgICAgICAgICB0ZXh0OiAn5rex6Imy5Li76aKYJywKICAgICAgICAgIGljb246ICdtZGktd2VhdGhlci1uaWdodCcsCiAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zZXRUaGVtZSh0cnVlLCBmYWxzZSksCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ3N5c3RlbScsCiAgICAgICAgICB0ZXh0OiAn6Lef6ZqP57O757ufJywKICAgICAgICAgIGljb246ICdtZGktZGVza3RvcC10b3dlci1tb25pdG9yJywKICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNldFRoZW1lKGZhbHNlLCB0cnVlKSwKICAgICAgICB9LAogICAgICBdLAogICAgICBkYXJrOiBudWxsLAogICAgICBzeXN0ZW06IG51bGwsCiAgICAgIG1hdGNoTWVkaWE6ICh3aW5kb3cubWF0Y2hNZWRpYSkgPyB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpIDogZmFsc2UsCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICAvLyDlrozmiJAgaW50ZXJuYWxWYWx1ZSDlkowgdGhpcy5zeXN0ZW0gJiB0aGlzLmRhcmsg55qE5Y+M5ZCR57uR5a6aCiAgICBpbnRlcm5hbFZhbHVlOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5zeXN0ZW0gPyAnc3lzdGVtJyA6CiAgICAgICAgICB0aGlzLmRhcmsgPyAnZGFyaycgOiAnbGlnaHQnOwogICAgICB9LAogICAgICBzZXQodmFsKSB7CiAgICAgICAgY29uc3Qgc2V0ID0gdGhpcy5pdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS52YWx1ZSA9PT0gdmFsKQogICAgICAgIHNldC5jYWxsYmFjaygpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkYXJrTW9kZScsIHZhbCk7CiAgICAgIH0sCiAgICB9LAogIH0sCgogIHdhdGNoOiB7CiAgICBkYXJrKHZhbCkgewogICAgICB0aGlzLiR2dWV0aWZ5LnRoZW1lLmRhcmsgPSB2YWw7CiAgICB9LAogICAgc3lzdGVtKCkgewogICAgICBpZiAodGhpcy5zeXN0ZW0gJiYgdGhpcy5tYXRjaE1lZGlhKQogICAgICAgIHRoaXMuZGFyayA9IHRoaXMubWF0Y2hNZWRpYS5tYXRjaGVzOwogICAgfSwKICB9LAoKICBjcmVhdGVkKCkgewogICAgY29uc3QgdmFsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RhcmtNb2RlJyk7CiAgICB0aGlzLmludGVybmFsVmFsdWUgPSB2YWwgPyB2YWwgOiAnc3lzdGVtJzsKCiAgICBpZiAodGhpcy5tYXRjaE1lZGlhKQogICAgICB0aGlzLm1hdGNoTWVkaWEub25jaGFuZ2UgPSAoe21hdGNoZXN9KSA9PiB7CiAgICAgICAgaWYgKHRoaXMuc3lzdGVtKQogICAgICAgICAgdGhpcy5kYXJrID0gbWF0Y2hlczsKICAgICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIHNldFRoZW1lKGRhcmsgPSBmYWxzZSwgc3lzdGVtID0gZmFsc2UpIHsKICAgICAgdGhpcy5kYXJrID0gZGFyazsKICAgICAgdGhpcy5zeXN0ZW0gPSBzeXN0ZW07CiAgICB9LAogIH0KfQo="},{"version":3,"sources":["ThemeSettings.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ThemeSettings.vue","sourceRoot":"node_modules/vuepress-theme-blog-material/components/Header/SettingsDrawer/Settings","sourcesContent":["<script>\n// Extensions\nimport SettingsGroup from '../Template'\n\nexport default {\n  name: 'ThemeSettings',\n\n  extends: SettingsGroup,\n\n  data() {\n    return {\n      title: '主题',\n      items: [\n        {\n          value: 'light',\n          text: '浅色主题',\n          icon: 'mdi-white-balance-sunny',\n          callback: () => this.setTheme(false, false),\n        },\n        {\n          value: 'dark',\n          text: '深色主题',\n          icon: 'mdi-weather-night',\n          callback: () => this.setTheme(true, false),\n        },\n        {\n          value: 'system',\n          text: '跟随系统',\n          icon: 'mdi-desktop-tower-monitor',\n          callback: () => this.setTheme(false, true),\n        },\n      ],\n      dark: null,\n      system: null,\n      matchMedia: (window.matchMedia) ? window.matchMedia('(prefers-color-scheme: dark)') : false,\n    };\n  },\n\n  computed: {\n    // 完成 internalValue 和 this.system & this.dark 的双向绑定\n    internalValue: {\n      get() {\n        return this.system ? 'system' :\n          this.dark ? 'dark' : 'light';\n      },\n      set(val) {\n        const set = this.items.find(item => item.value === val)\n        set.callback();\n        localStorage.setItem('darkMode', val);\n      },\n    },\n  },\n\n  watch: {\n    dark(val) {\n      this.$vuetify.theme.dark = val;\n    },\n    system() {\n      if (this.system && this.matchMedia)\n        this.dark = this.matchMedia.matches;\n    },\n  },\n\n  created() {\n    const val = localStorage.getItem('darkMode');\n    this.internalValue = val ? val : 'system';\n\n    if (this.matchMedia)\n      this.matchMedia.onchange = ({matches}) => {\n        if (this.system)\n          this.dark = matches;\n      }\n  },\n\n  methods: {\n    setTheme(dark = false, system = false) {\n      this.dark = dark;\n      this.system = system;\n    },\n  }\n}\n</script>\n"]}]}